<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <style>
        body { color: var(--vscode-editor-foreground); font-family: var(--vscode-font-family); padding: 20px; }
        .card { background: var(--vscode-editor-background); border: 1px solid var(--vscode-panel-border); padding: 15px; border-radius: 4px; }
        button { background: var(--vscode-button-background); color: var(--vscode-button-foreground); border: none; padding: 8px 12px; cursor: pointer; }
        button:hover { background: var(--vscode-button-hoverBackground); }
    </style>
</head>
<body>
    <div class="card">
        <h2 id="title">A aguardar dados...</h2>
        <p id="desc"></p>
        <button onclick="sendAction()">Enviar Evento para o Script</button>
    </div>

    <script>
        const vscode = acquireVsCodeApi();

        // Ouvir mensagens vindas do Pipeline (via bridge.ui.render ou postMessage)
        window.addEventListener('message', event => {
            const { type, payload } = event.data;
            if (type === 'HYDRATE') {
                document.getElementById('title').innerText = payload.title || 'Bridge Ativo';
                document.getElementById('desc').innerText = payload.description || '';
            }
        });

        function sendAction() {
            // Enviar de volta para o Bridge Script
            vscode.postMessage({ action: 'BUTTON_CLICKED', timestamp: Date.now() });
        }
    </script>
</body>
</html>